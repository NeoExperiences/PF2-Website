---
layout: blog
subject: "Updates"
title:  "Update 0.7"
date:   2022-02-07 00:00:00 +1100
categories: updates
description: "What we've been doing!"
hidden: true
permalink: /:categories/codename-pizza/ 
excerpt: "Updates to the current build of PF2. We're stable now!"
---

After over a year a work, we're happy to finally release the long awaited update 0.7 for Pre-Fortress 2.

> This update has an immense amount of changes if you're interested in a more in depth look on grenades, the new menu or preview our maps view the links below

- **[In-Depth Preview of new grenade animations](grenades)**
- **[Developer commentary on the new menu](main-menu)**
- **[Map previews](maps)**

# Patch Notes

## Notable Changes

- PF2 no longer mounts Team Fortress 2
  - If your content uses assets from TF2 they must now be added to PF2 or packed into the map.

## Gameplay

- Added the ability to throw the flag (bound to <kbd>L</kbd> by default)
- Decreased invisibility when bumping into enemy players
- Reduced effectiveness of infection 
  - Duration of 12 seconds with 6 damage dealt every 2 seconds
- Removed being able to destroy sappers with a gun.
- Added King of the Hill support
- Added Payload and Payload race support
- Added building hauling
- Added level 3 buildings

## Grenades

- Every grenade now has a view model
- Completely changed how grenades bounce off the world, now behaving more like a GoldSrc grenade
- Beeping system is now similar to Team Fortress Classic's
- Reduced intensity of the concussion effect
- Added the ConVar `pf_accessibility_concussion` which changes the concussion effect to primarily affect the crosshair
- Caltrops now open in a set pattern and face up when active
- The nail grenade now fires more predictably
- Added ability to disarm grenades by striking them with a melee or firing a weapon at it
  - Striking any grenade with a melee will disarm it instantly
  - Firing twice a weapon at any grenade will disarm it
- Changed the throw arch to match players view
- The gas grenade now inflicts a basic hallucination effect and melts armor while inside the area of effect
- Thrown grenades will deal a small amount of damage when bouncing off a player
- Grenades no longer collide with respawn room visualizers
- The gas grenade no longer needs to be on the ground to detonate
- Disguise is now removed when throwing a gas grenade.

## Weapons

- Weapons now have a set weapon spread
- Pipebombs now fizzle when shot instead of exploding
- Reverted nails to only show client-side projectiles
- The muzzle flashes, both models and particles, are no longer affected by your FOV
- Converted all weapons view models to L4D style v_models
- Halved nail gravity
- Added the ConVar `pf_sniper_toggle_charge` which makes it so the Sniper rifle to requires a second press to fire
- Added flamethrower alt-fire muzzle flash effect
- The wrench and syringe are now lag compensated for both teams
- Weapons now have crit glow and particle
- Slightly increased the syringe's range to more easily hit friendly players
- Sniper rifle now has a laser to indicate if the sniper is charging
- Nailgun now deals less damage against sentries at higher levels
- Flipped viewmodels will now fire projectiles from the correct side

## Class changes

- Reverted scout's speed down to from 450 hu/s to 400 hu/s
- Increased scouts health from 75 to 90
- Reduced soldier's armor from 250 to 200
- The flag speed penalty now specified per class instead of every class being slowed down by 25%
- Cloaked Spy takes less damage from afterburn and various grenade effects.

## Textures

- Updated revolver texture
- Updated control point beam shader parameters to more closely match the beta's
- Added Infection kill icon
- Updated dispenser screens

## Models

- Updated armor pack model
- Updated grenade bucket model
- Added Mat49 smg model for Medic
- Added beta styled teleporters
- Updated scouts model to include headset bone


## Animations
- Added Beta 3rd person soldier shovel animations
- Added first person grenade animations for all classes
- Added loser animations
- Added head shot animations
- Added back stab death animations

## Particles

- Added infection head and player particle
- Added hallucination head particle
- Updated napalm particle 
- Updated fire particles
- Updated gas grenade particle to better represent it's area of effect
- The Medigun now uses normal TF2's beam particle for better visibility
- All weapons now have proper crit trails

## Sounds

- Updated grenade bucket pickup sound
- Updated armor pickup sound
- Updated nail grenade sound
- Updated concussion blast sound
- Updated gas grenade sound
- Updated pin pull sound
- Updated the EMP sound
- Added grenade defuse sounds
- Added incendiary rocket sound
- Restored player specific voice lines

## Maps

- Renamed ad_dustbowl2 to pl_goldrush
- Removed the `pf_cp_flag` ConVar. Attack/Defend with a flag is done on a per map basis
- Added the spawn room turret for future use.
- Maps without any armor packs will restore armor with health kits

### Existing maps

- 2Fort
  - Updated blue intel floor tiles.
  - Updated lighting to more closely resemble the beta.
  - Updated various team related textures
  - Added color correction.
- Dustbowl
  - Moved the final cap's left red spawn resupply locker back to its retail position to mitigate grenade spam.
- Gravelpit
  - Removed flag
- Well (CTF)
  - Replaced ramp from sniper battlements to the attic with an elevator
  - Changed the lighting to night.
- Target
  - Now includes rooms for the the ceiling and floor variations of the spawn room turret
- Target (PF)
  - Updated spawnroom turret rooms
  - Removed various assets
  - Unpacked and added assets to base game

### New maps

- Goldrush (PL)
  - Converted ad_dustbowl2 into pl_goldrush
  - Features final point from Goldrush
- Badlands (CP)
  - Updated textures to resemble early screenshots of badlands
- Crossover (KOTH)
  - Reimagined TFC map
- Well (Arena)
  - Uses sunset lighting found in early screenshots of TF2
- Well (CP)
  - Well, Well, Well
- Powerhouse
  - Added armor support

## HUD

- Added a brand new main menu (Old menu still available via the `-oldui` launch option.)
- Cleaned up CTF hud and improved the arrows functionality
- Added HUD indication for low armor
- Added low health, low armor and armor depletion sound alerts
- Certain HUD elements are now excluded from `cl_drawhud` 
- Added a PF2 specific section to Advanced options
- Added simplified disguise kit option
- Updated minimized HUD mode
- Added the armor repaired stat to the stat summary menu
- Engineers now see a armor speech bubble when a player calls for medic
- Added health account numbers
- Moved the stats menu to a tab in the load out menu
- Updated condition icons 
- Added crit backgrounds for both teams to the kill feed
- Added a grenade detonation timer HUD
- Added disguise status HUD
- Added updated TargetID
- Ubercharge HUD now shows the Uber percentage
- Low ammo HUD warning
- Added a PF2 specific tab in the create server dialogue
- Added icons to the grenade ammo HUD element

## Misc.

- Updated the codebase to use the v143 toolset/C++17
- Discord RPC support on Linux and Mac OS
- Marked `mp_restartround` as a cheat due to it causing unresolvable issues
- Many changes to enable friendly fire to function correctly
  - Will not work inside spawn rooms
  - Certain weapons are excluded such as the syringe, heal grenade and wrench
  - Added `mp_friendlyfire 2` which will only do push back and events but not actually deal damage
  - Unmarked `tf_avoidplayers` as a cheat
- Added more I/O and variables for the flag entity
- `host_timescale` now affects sound pitch 
- `lastdisguise` will now switch disguise weapon to matching active slot
- `cl_burninggibs` now functions as intended
- Added ConVar `tf_delete_temp_files`
- Added Uber flashing drain penalty
- Added voice command spam penalty
- Added bell alert when the Sniper rifle is fully charged
- Added flamethrower "sizzle" sound when hitting a target
- Minigun ejects shells with as ammo is depleted instead of it being an animation event
- Medics receive damage events from their target
- Explosions now affect ragdolls
- Restored functionality of builds alerting engineer after any drop from 100% health
- Medics now receive the damage events dealt by their healing target

## Source Mod Plugins
- Source Mod is now supported using [PF2-Tools](https://github.com/Pre-Fortress-2/PF2-Tools).
- Special thanks to **Conneath**
- All base TF2 plugins should function with slight adjustments

## Achievements
{% include achievement.html ach_image="/assets/achievements/pf_nade_multi_heal_player.png" ach_name="Special kind of Medicine " ach_desc="Simultaneously heal 3 or more teammates with the Heal Grenade."%}
{% include achievement.html ach_image="/assets/achievements/pf_fatfingers.png" ach_name="The Fat Finger" ach_desc="Kill an enemy spy with a remote Dispenser or Teleporter detonation." %}
{% include achievement.html ach_image="/assets/achievements/pf_bonk_by_nade.png" ach_name="Heads up" ach_desc="Kill an enemy by hitting them directly with any grenade type."%}
{% include achievement.html ach_image="/assets/achievements/question_mark.png" ach_name="+1 Hidden Achievement" ach_desc="Lets see if you truly know how to play Demoman"%}

## Bug fixes

- Drowning no longer affects armor
- Fixed concussion view angles going too far out
- Disguised Spy's can no longer pickup the intelligence
- Fixed gas and nail grenades still playing sounds after deletion
- Fixed napalm particle effect remaining after deletion
- Nails emitted by the nail grenade are now deleted with the grenade
- Fixed the armor hud background not always updating
- Fixed a crash when updating the armor repaired stat
- Fixed a crash relating to orphaned nails
- Fixed sentry muzzle lights spawning at the world origin
- Changed consistency of auto healing with the Medigun
- Fixed hit sounds not working when a delay is set
- Fixed flag arrow disappearing when facing exactly forwards or backwards
- Fixed the sniper rifle muzzle flash not appearing in 3rd person while zoomed
- Fixed the beta explosion effect only exploding upwards
- Environmental suicides now attribute an assistor 
- No longer allowed to disguise while taunting or taunt while disguising
- Fixed sentries not respecting `pf_muzzleflash`
- Fixed the Minigun muzzle flash particle remaining on round end
- Fixed the gas grenade particle emitting at weird angles
- Fixed the microphone icon overlapping the dead icon in voice chat
- Fixed EMP lightning arcs appearing through walls
- Fixed crashes relating to the grenade's physics meshes
- The Medigun now heals the broken leg condition
- `lastdisguise` will now remember the previous team
- Stopped blood emitting from concussion blasts
- Spies can now cap control points if disguised as their own team
- Fixed pistol fire rate going higher than normal when spamming fire
- Fixed grenades remaining on players after throwing

## ConVars

### Client ConVars
- `pf_accessibility_concussion` Enable a less nauseating concussion effect, instead affecting the position of the crosshair
- `pf_armor_alerts_depleted` Enable the depleted armor alert sound
- `pf_armor_alerts_low` Enable the low armor alert sound
- `pf_armor_alerts_low_percentage` Percentage when the low armor alert sound plays
- `pf_armor_alerts_volume` Armor alerts sound volume
- `pf_disable_hands` Disables viewmodel hands
- `pf_grenade_hud_timer` Enable the grenade ring timer HUD
- `pf_grenade_hud_timer_scale` Grenade ring timer HUD size scale
- `pf_particle_explosions` Re-enables particle explosions (Incase you want to use custom explosion mods)
- `pf_sniper_toggle_charge` Sets the Sniper rifle to require one press to start charging and a second press to fire

### Server/Replicated ConVars
- `mp_friendlyfire` Enable friendly fire. 1=on, 2=events only
- `mp_waitingforplayers_opengates` Opens gates while waiting for players
- `pf_allow_voice_spam` Disables voice command spam prevention
- `pf_flag_allow_return_on_touch` Enable flag return on touch.
- `pf_flag_allow_throwing` Enable players to throw the flag.
- `pf_flag_throw_force` The force of flag throwing
- `pf_force_crits` Force crits to be always on
- `pf_force_flag_speed_penalty` Force the speed penalty on while carrying the flag outside of attack/defend.
- `pf_grenades_bonk` Enable grenades dealing damage when colliding with players
- `pf_grenades_disarm_shots` Number of melee hits required to disarm a grenade
- `pf_grenades_tfc` Sets grenade physics to be similar to how they were in GoldSrc
- `pf_healthkit_armor_repair` Enable restoring armor from health pickups: -1=Auto on maps without armor packs, 0=Always off , 1=Always on
- `pf_round_end_friendlyfire` Enable friendly fire after a round ends
- Renamed `pf_armor_ratio_*` to `pf_armor_absorption_*`

### Retired ConVars
These are ConVars that no longer exist in game for one reason or another

- Removed when it was decided to have the AD flag on a per map basis
  - `pf_cp_flag`, `pf_cp_flag_reset_on_cap`, `sv_vote_issue_toggle_flag_allowed` and `sv_vote_issue_toggle_flag_cooldown`
- Removed as armor has been set in stone for balancing reasons
  - `pf_armor_enabled` and `tf_boost_drain_time_armor`
- Removed because they were never used in development and were unlikely to be used outside of development
  - `pf_armor_bonus`, `pf_armor_bonus_multi_explosive` and `pf_armor_bonus_multi_headshots`
- _Why would you want to play without grenades?_
  - `pf_grenades` 

### Thanks and Credits
- [SDK2013CE](https://github.com/Nbc66/source-sdk-2013-ce)
- [TF2Vintage](https://github.com/TF2V/TF2Vintage)
- [TF2Classic](https://tf2classic.com)
- [Open Fortress](https://openfortress.fun)