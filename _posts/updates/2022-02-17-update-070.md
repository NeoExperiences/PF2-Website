---
layout: blog
subject: "Updates"
title:  "Update 0.7"
date:   2022-02-07 00:00:00 +1100
categories: updates
author: Cyanide
description: "What we've been doing!"
hidden: true    
NoFeatureImage: true
permalink: /:categories/codename-pizza/ 
---

After over a year a work, we're happy to finally release the long awaited update 0.7 for Pre-Fortress 2.

> Fluff this up more

> Eventually turn these sections into images

[Section on the grenades](grenades)

[Section on the main menu](main-menu)

[Section on maps](maps)

# Patch Notes

## Gameplay

- Added the ability to throw the flag (bound to <kbd>k</kbd> by default)
- Decreased invisibility when bumping into enemy players
- Teleporters now explode on detonation
- Reduced effectiveness of infection 
  - Duration of 12 seconds with 6 damage dealt every 2 seconds
- Friendly fire turns on at the end of a round
- Removed being able to destroy sappers with a gun (no one remembered it was a feature and it was too fiddly to successfully pull off a lot of the time)
- Added King of the Hill support (from TF2Classic/TF2Vintage)
- Added Payload and Payload race support (from TF2Classic/TF2Vintage)
- Added building hauling (from TF2Classic/TF2Vintage)
- Added level 3 buildings (from TF2Classic/TF2Vintage)

## Grenades

- Every grenade now has a view model
- Completely changed how grenades bounce off the world, now behaving more like a GoldSrc grenade
- Reverted beeping the beeping structure from the beta's to TFC's
- Reduced intensity of the concussion effect
- Added the ConVar `pf_accessibility_concussion` which changes the concussion effect to primarily affect the crosshair
- Over all reduction to randomness
- Caltrops now open in a set pattern and face up when active
- The nail grenade now fires like the tac shooter from BTD
- Added ability to disarm grenades by striking them with a melee weapon
  - Can disarm grenades that activate such as the gas or nail grenade
- Changed the throw arch to more closely match with where you're actually looking
- The gas grenade now inflicts a basic hallucination effect and melts armor while inside the area of effect
- Thrown grenades will deal a small amount of damage when bouncing off a player
- Reworked holstering to look less awful at high ping
- Grenades no longer collide with respawn room visualizers
- The gas grenade no longer needs to be on the ground to detonate
- Changed the EMP sound

## Weapons

- Every weapon now has proper holster and un-holster animations
- Weapons now have a set weapon spread
- Pipe bomb's now fizzle when shot instead of exploding
- Reverted nails to only show client-side projectiles
- The muzzle flashes, both models and particles, are no longer affected by your FOV
- Converted all weapons view models to L4D style v_models (animations are stored in the weapon model and hands are attached)
- Halved nail gravity
- Added the ConVar `pf_sniper_toggle_charge` which makes it so the Sniper rifle to requires a second press to fire
- Added flamethrower alt-fire muzzle flash effect
- The wrench and syringe are now lag compensated for both teams
- Weapons now have crit glow and particle (Stolen from TF2C)
- Slightly increased the syringe's range to more easily hit friendly players
- Flipped viewmodels will now fire projectiles from the correct side

## Class changes

- Reverted scout's speed down to from 450 hu/s to 400 hu/s
- Increased scouts health from 75 to 90
- Reduced soldier's armor from 250 to 200
- The flag speed penalty now specified per class instead of every class being slowed down by 25%

> Primarily need to work on the following 4 sections

## Textures

- New revolver texture based partly on the festive revolver and partly on the concept art.
- Updated control point beam shader parameters to more closely match the beta's
- Added Infection kill icon

## Models & Animations

- Beta 3rd person soldier shovel animations
- Added loser animations
- Added head shot and back stab death animations
- Updated grenade bucket model
- Updated armor pack model

## Particles

- Added infection head and player particle
- Added hallucination head particle
- Updated napalm particle 
- Reverted all fire particles from the beta's to release's
- Updated gas grenade particle to more accurately represent it's area of effect
- The Medigun now uses normal TF2's beam particle for better visibility
- All weapons now have proper crit trails

## Sounds

- New grenade bucket pickup sound
- New armor pickup sound
- Updated nail grenade sound
- Added grenade defuse sounds
- Unique incendiary rocket sound
- Restored player specific voice lines
- Player voice lines are now in mp3 instead of wav
- Updated concussion blast sound
- Updated gas grenade sound

## Maps

- Removed the `pf_cp_flag` ConVar. Attack/Defend with a flag is done on a per map basis
- Added the spawn room turret to some maps
- Maps without any armor packs will restore armor with health kits

### Existing maps

- 2Fort
  - Added chicken or some shit
  - Updated blue intel floor tiles
  - Updated lighting to more closely resemble the beta
- Dustbowl
  - Moved the final cap's left red spawn resupply locker back to its retail position to mitigate infinite grenade spam
  - Something position
- Gravelpit
  - Removed flag
- Well (CTF)
  - Replaced ramp from sniper battlements to the attic with an elevator
- Target
  - Now includes rooms for the the ceiling and floor variations of the spawn room turret

### New maps

- Push (Football Capture the Flag)
  - Port of the TFC map push, there is a central neutral flag and the goal is to capture it in the other team's base
- Added Badlands (CP)
  - Same layout as release but, similarly to dustbowl2, it uses a different set of textures based on the relist from the Postal 3 leak

## HUD

- Added a brand new main menu
- Added a load out menu (currently no weapons)
- Cleaned up CTF hud and made the arrows function more closely to the Beta
- Added HUD indication for low armor
- Added low health, low armor and armor depletion sound alerts
- Certain HUD elements are now excluded from `cl_drawhud` (Stolen from OF)
- Added a PF2 specific section to Advanced options
- Ported simplified disguise kit option
- Changed position of some HUD elements for minimized HUD mode
- Added the armor repaired stat to the stat summary menu
- Engineers now see a armor speech bubble when a player calls for medic
- Added health account numbers
- Moved the stats menu to a tab in the load out menu (The same as normal TF2)
- Updated condition icons 
- Added crit backgrounds for the kill feed
- Added a grenade detonation timer HUD
- Ported disguise status HUD
- Ported updated TargetID
- Ubercharge HUD now shows the Uber percentage
- Low ammo HUD warning
- Added a PF2 specific tab in the create server dialogue
- Updated the grenade ammo HUD to convey what grenades you actually have

## Misc.

- Updated the codebase to use the v143 toolset/C++17 (From [SDK2013CE](https://github.com/Nbc66/source-sdk-2013-ce))
- Discord RPC support on Linux and Mac OS
- Marked `mp_restartround` as a cheat due to it causing unresolvable issues
- Many changes to enable friendly fire to function correctly
  - Will not work inside spawn rooms
  - Certain weapons are excluded such as the syringe, heal grenade and wrench
  - Added `mp_friendlyfire 2` which will only do push back and events but not actually deal damage
  - Unmarked `tf_avoidplayers` as a cheat
- Added more I/O and variables for the flag entity
- `host_timescale` now affects sound pitch (Stolen from OF)
- `lastdisguise` will now switch disguise weapon to matching active slot
- `cl_burninggibs` now functions correctly
- Added ConVar `tf_delete_temp_files`
- Added Uber flashing drain penalty
- Added voice command spam penalty
- Added bell alert when the Sniper rifle is fully charged
- Added flamethrower "sizzle" sound when hitting a target
- Minigun ejects shells with as ammo is depleted instead of it being an animation event
- Medics now receive the damage events dealt by their healing target


## Achievements
{% include achievement.html ach_image="/assets/achievements/pf_nade_multi_heal_player.png" ach_name="Special kind of Medicine " ach_desc="Simultaneously heal 3 or more teammates with the Heal Grenade."%}
{% include achievement.html ach_image="/assets/achievements/pf_fatfingers.png" ach_name="The Fat Finger" ach_desc="Kill an enemy spy with a remote Dispenser or Teleporter detonation." %}
{% include achievement.html ach_image="/assets/achievements/pf_bonk_by_nade.png" ach_name="Heads up" ach_desc="Kill an enemy by hitting them directly with any grenade type."%}
{% include achievement.html ach_image="/assets/achievements/question_mark.png" ach_name="+1 Hidden Achievement" ach_desc="Lets see if you truly know how to play Demoman"%}

## Bug fixes

- Drowning no longer affects armor
- Fixed concussion view angles going too far out
- Disguised Spy's can no longer pickup the intelligence
- Fixed gas and nail grenades still playing sounds after deletion
- Fixed napalm particle effect remaining after deletion
- Nails emitted by the nail grenade are now deleted with the grenade
- Fixed the armor hud background not always updating
- Fixed a crash when updating the armor repaired stat
- Fixed a crash relating to orphaned nails
- Fixed sentry muzzle lights spawning at the world origin
- Changes to auto healing with the Medigun to make it feel less inconsistent 
- Fixed hit sounds not working when a delay is set
- Fixed flag arrow disappearing when facing exactly forwards or backwards
- Fixed the sniper rifle muzzle flash not appearing in 3rd person while zoomed
- Fixed the beta explosion effect only exploding upwards
- Environmental suicides now attribute an assistor 
- No longer allowed to disguise while taunting or taunt while disguising
- Fixed sentries not respecting `pf_muzzleflash`
- Fixed the Minigun muzzle flash particle remaining on round end
- Fixed the gas grenade particle emitting at weird angles
- Fixed the microphone icon overlapping the dead icon in voice chat
- Fixed EMP lightning arcs appearing through walls
- Fixed crashes relating to the grenade's physics meshes
- The Medigun now heals the broken leg condition
- `lastdisguise` will now remember the previous team
- Stopped blood emitting from concussion blasts
- Spys can now cap control points if disguised as their own team
- Fixed pistol fire rate going higher than normal when spamming fire

## ConVars

### Client ConVars
- `pf_accessibility_concussion` Enable a less nauseating concussion effect, instead affecting the position of the crosshair
- `pf_armor_alerts_depleted` Enable the depleted armor alert sound
- `pf_armor_alerts_low` Enable the low armor alert sound
- `pf_armor_alerts_low_percentage` Percentage when the low armor alert sound plays
- `pf_armor_alerts_volume` Armor alerts sound volume
- `pf_disable_hands` Disables viewmodel hands
- `pf_grenade_hud_timer` Enable the grenade ring timer HUD
- `pf_grenade_hud_timer_scale` Grenade ring timer HUD size scale
- `pf_particle_explosions` Re-enables particle explosions (Incase you want to use custom explosion mods)
- `pf_sniper_toggle_charge` Sets the Sniper rifle to require one press to start charging and a second press to fire

### Server/Replicated ConVars
- `mp_friendlyfire` Enable friendly fire. 1=on, 2=events only
- `mp_waitingforplayers_opengates` Opens gates while waiting for players
- `pf_allow_voice_spam` Disables voice command spam prevention
- `pf_flag_allow_return_on_touch` Enable flag return on touch.
- `pf_flag_allow_throwing` Enable players to throw the flag.
- `pf_flag_throw_force` The force of flag throwing
- `pf_force_crits` Force crits to be always on
- `pf_force_flag_speed_penalty` Force the speed penalty on while carrying the flag outside of attack/defend.
- `pf_grenades_bonk` Enable grenades dealing damage when colliding with players
- `pf_grenades_disarm_shots` Number of melee hits required to disarm a grenade
- `pf_grenades_tfc` Sets grenade physics to be similar to how they were in GoldSrc
- `pf_healthkit_armor_repair` Enable restoring armor from health pickups: -1=Auto on maps without armor packs, 0=Always off , 1=Always on
- `pf_round_end_friendlyfire` Enable friendly fire after a round ends
- Renamed `pf_armor_ratio_*` to `pf_armor_absorption_*`

### Retired ConVars
These are ConVars that no longer exist in game for one reason or another

- Removed when it was decided to have the AD flag on a per map basis
  - `pf_cp_flag`, `pf_cp_flag_reset_on_cap`, `sv_vote_issue_toggle_flag_allowed` and `sv_vote_issue_toggle_flag_cooldown`
- Existed incase players hated armor
  - `pf_armor_enabled` and `tf_boost_drain_time_armor`
- Removed because they were never used in development and were unlikely to be used outside of development
  - `pf_armor_bonus`, `pf_armor_bonus_multi_explosive` and `pf_armor_bonus_multi_headshots`
- _Why would you want to play without grenades?_
  - `pf_grenades` 